{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://github.com/dustylau/generator.handlebars/schemas/template-settings.schema.json",
  "title": "Template Settings",
  "description": "Configuration for generator.handlebars template generation",
  "type": "object",
  "properties": {
    "Target": {
      "type": "string",
      "description": "The model property to iterate over. Use 'Model' for single output from the entire model, or specify a property path like 'Items' to generate one file per item.",
      "default": "Model",
      "examples": ["Model", "Items", "Entities", "Tables"]
    },
    "TargetItem": {
      "type": "string",
      "description": "The variable name to use for the current item in iteration. This name is used in the template to reference each item.",
      "default": "item",
      "examples": ["item", "entity", "table", "model"]
    },
    "TargetProperty": {
      "type": "string",
      "description": "The property name used to access the target collection in the item model context.",
      "default": "target"
    },
    "ModelProperty": {
      "type": "string",
      "description": "The property name used to access the full model in the item model context.",
      "default": "model"
    },
    "TargetItemNameProperty": {
      "type": "string",
      "description": "The property name on each item that contains the item's name (used for default file naming).",
      "default": "Name"
    },
    "ExportPath": {
      "type": "string",
      "description": "Handlebars expression for the output file path. Use double backslashes before Handlebars expressions (e.g., '\\\\{{item.Name}}'). Can include any model properties.",
      "examples": [
        ".\\Generated\\{{item.Name}}.cs",
        ".\\Out\\\\{{item.Name}}.txt",
        "./output/{{model.ProjectName}}/{{item.FileName}}"
      ]
    },
    "PrepareExportPathUsingTemplate": {
      "type": "boolean",
      "description": "When true, the ExportPath is processed as a Handlebars template.",
      "default": true
    },
    "PrepareExportPathUsingReplace": {
      "type": "boolean",
      "description": "When true, the ExportPath uses simple string replacement instead of Handlebars.",
      "default": false
    },
    "AppendToExisting": {
      "type": "boolean",
      "description": "When true, generated content is appended to existing files. When false, existing files are overwritten.",
      "default": false
    },
    "SplitOn": {
      "type": "string",
      "description": "A marker string that splits a single template output into multiple files. Content between markers goes to separate files.",
      "examples": ["//##SPLIT##", "<!-- SPLIT -->", "# --- SPLIT ---"]
    },
    "FileNamePattern": {
      "type": "string",
      "description": "Regular expression pattern to extract filename from split content. Must include a named capture group 'FileName'.",
      "examples": [
        "//\\[(?<FileName>[\\w]+)\\]",
        "<!-- FileName: (?<FileName>[\\w.-]+) -->",
        "# File: (?<FileName>.+)$"
      ]
    },
    "RemoveFileName": {
      "type": "boolean",
      "description": "When true, the filename marker line is removed from the generated output.",
      "default": false
    },
    "GenerateIf": {
      "type": "string",
      "description": "Condition expression that must evaluate to true for the template to generate. Format: 'path operator value'. Supports operators: eq, ne, gt, lt, gte, lte, contains, startswith, endswith, matches, exists, empty. Use 'env:VAR_NAME' to check environment variables.",
      "examples": [
        "Model.type eq entity",
        "item.IsActive eq true",
        "Model.count gt 0",
        "item.Name startswith User",
        "env:GENERATE_MODELS"
      ]
    },
    "SkipIf": {
      "type": "string",
      "description": "Condition expression that skips generation when it evaluates to true. Uses the same format as GenerateIf. Useful for excluding specific items from generation.",
      "examples": ["item.IsAbstract eq true", "item.Name endswith Base", "env:SKIP_GENERATION"]
    },
    "Enabled": {
      "type": "boolean",
      "description": "When false, the template is completely disabled and will not generate any output.",
      "default": true
    },
    "Description": {
      "type": "string",
      "description": "Human-readable description of what this template generates. Used for documentation and CLI output.",
      "examples": [
        "Generates C# entity classes",
        "Creates API controller files",
        "Builds TypeScript interfaces from model"
      ]
    }
  },
  "examples": [
    {
      "Target": "Items",
      "TargetItem": "item",
      "ExportPath": ".\\Generated\\\\{{item.Name}}.cs",
      "AppendToExisting": false
    },
    {
      "Target": "Model",
      "TargetItem": "model",
      "ExportPath": ".\\Output\\combined.txt",
      "SplitOn": "//##SPLIT##",
      "FileNamePattern": "//\\[(?<FileName>[\\w]+)\\]",
      "RemoveFileName": true
    },
    {
      "Target": "Entities",
      "TargetItem": "entity",
      "ExportPath": "./models/{{entity.Name}}.ts",
      "GenerateIf": "Model.generateEntities eq true",
      "SkipIf": "entity.IsAbstract eq true",
      "Description": "Generates TypeScript entity classes"
    }
  ],
  "additionalProperties": false
}
